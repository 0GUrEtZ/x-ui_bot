# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ 3X-UI Telegram Bot

## –û–±–∑–æ—Ä
–≠—Ç–æ Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN —á–µ—Ä–µ–∑ 3X-UI –ø–∞–Ω–µ–ª—å. –ë–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN-–ø–æ–¥–ø–∏—Å–∫–∞–º–∏.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üèóÔ∏è **cmd/bot/** - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- **main.go** - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ graceful shutdown

### ‚öôÔ∏è **internal/config/** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **config.go** - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ YAML —Ñ–∞–π–ª–∞
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–Ω–µ–ª–∏ 3X-UI (URL, credentials, –ª–∏–º–∏—Ç—ã)
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞ (—Ç–æ–∫–µ–Ω, –∞–¥–º–∏–Ω—ã, –ø—Ä–æ–∫—Å–∏)
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π (—Ü–µ–Ω—ã, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥)

### ü§ñ **internal/bot/** - –Ø–¥—Ä–æ –±–æ—Ç–∞
- **bot.go** - –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–æ—Ç–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª
- **handlers_*.go** - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ callback-–∑–∞–ø—Ä–æ—Å–æ–≤:
  - `handlers_commands.go` - –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (/start, /help, /id, /clients)
  - `handlers_registration.go` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π
  - `handlers_settings.go` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (email, –ø–æ–¥–ø–∏—Å–∫–∞)
  - `handlers_admin.go` - –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–º–æ–¥–µ—Ä–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
  - `handlers_broadcast.go` - –ú–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –∏ –±—ç–∫–∞–ø—ã
  - `handlers_routing.go` - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è callback-–∑–∞–ø—Ä–æ—Å–æ–≤
- **helpers_*.go** - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
  - `helpers_messaging.go` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
  - `helpers_state.go` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - `helpers_utils.go` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- **keyboard/** - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä –∏ –º–µ–Ω—é
- **middleware/** - –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û (rate limiting, –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- **services/** - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ä–∞—Å—á–µ—Ç—ã)

### üåê **pkg/client/** - –í–Ω–µ—à–Ω–∏–µ API
- **api_client.go** - HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è 3X-UI –ø–∞–Ω–µ–ª–∏
  - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Å–µ—Å—Å–∏–∏
  - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å inbounds –∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –±—ç–∫–∞–ø–æ–≤

### üíæ **internal/storage/** - –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è:
  - –°–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (TTL 24—á)
  - –ó–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
  - –°–æ–æ–±—â–µ–Ω–∏–π –∞–¥–º–∏–Ω–∞–º
  - –ö—ç—à–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤

### üìù **internal/logger/** - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å zerolog
- –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### üõë **internal/shutdown/** - Graceful shutdown
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
- –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### üö® **internal/errors/** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

## üîÑ –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: `/start` ‚Üí –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã ‚Üí –º–æ–¥–µ—Ä–∞—Ü–∏—è –∞–¥–º–∏–Ω–æ–º ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏, —Å–º–µ–Ω–∞ email
3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: —Å–≤—è–∑—å —Å –∞–¥–º–∏–Ω–æ–º —á–µ—Ä–µ–∑ –±–æ—Ç–∞

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
1. **–ú–æ–¥–µ—Ä–∞—Ü–∏—è**: –æ–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–ª–∏–µ–Ω—Ç–æ–≤, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ä–æ–∫–æ–≤
3. **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è**: –º–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏, –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –±—ç–∫–∞–ø—ã, –ª–æ–≥–∏

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- Rate limiting (10 req/min)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- TTL —Å–µ—Å—Å–∏–π –∏ –∫—ç—à–∞
- HTTPS –¥–ª—è API –≤—ã–∑–æ–≤–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

## üìä –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- ~4500 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- 25+ —Ñ–∞–π–ª–æ–≤
- –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ß–∏—Å—Ç—ã–π –∫–æ–¥ (0 linting –ø—Ä–æ–±–ª–µ–º)

## üöÄ –ó–∞–ø—É—Å–∫
```bash
# –° Docker
docker-compose up -d

# –ë–µ–∑ Docker
go run ./cmd/bot
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
x-ui_bot/
‚îú‚îÄ‚îÄ cmd/bot/main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ bot/                     # –Ø–¥—Ä–æ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ storage/                 # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ logger/                  # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ shutdown/                # Graceful shutdown
‚îú‚îÄ‚îÄ pkg/client/                  # API –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ config.yaml.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ docker-compose.yml           # Docker –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ Dockerfile                   # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
```